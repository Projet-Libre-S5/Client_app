<div class="bg-white rounded-2xl">
    <p class="text-primary-light pt-6 px-10 text-xl font-semibold truncate">
      {{'user.title' | translate}}
    </p>
    <div class="grid grid-cols-6 gap-4 px-10 pt-20 pb-44 h-[70vh]">
      <!-- steps -->
      <div class="col-span-2  pt-32 pl-6 ml-4 mb-6  min-w-[40px] border-gray-200" 
        [ngClass]="currentLang === 'ar'? 'border-l-2':'border-r-2'"
      >
        <app-breadcrumb-steps  [step]="step"/>
      </div>
   <ng-container *ngIf="step == 1">
  <!-- form -->
  <div class="animate__animated m-auto ml-8 py-2 animate__zoomIn col-span-3 xl:col-span-3 max-xl:col-span-4 h-72  w-full">
    <form [formGroup]="UserFormStepOne" class="w-full max-w-lg ml-4">
      <!-- Row 1: Nom / Prénom -->
      <div class="grid grid-cols-2 gap-6 mb-6">
        <div class="col-span-1">
          <label for="nom" class="block tracking-wide text-gray-700 font-[300] mb-2 text-sm">
            {{ 'user.nom' | translate }}
          </label>
          <input
            formControlName="nom"
            id="nom"
            type="text"
            class="appearance-none block w-full text-gray-700 font-[200] border border-gray-200 rounded focus:outline-none focus:bg-white peer min-h-[auto] focus:border-[1.5px] focus:border-primary px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary bg-slate-100"
            placeholder="{{ 'user.enter_nom' | translate }}"
          />
        </div>
        <div class="col-span-1">
          <label for="prenom" class="block tracking-wide text-gray-700 font-[300] mb-2 text-sm">
            {{ 'user.prenom' | translate }}
          </label>
          <input
            formControlName="prenom"
            id="prenom"
            type="text"
            class="appearance-none block w-full text-gray-700 font-[200] border border-gray-200 rounded focus:outline-none focus:bg-white peer min-h-[auto] focus:border-[1.5px] focus:border-primary px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary bg-slate-100"
            placeholder="{{ 'user.enter_prenom' | translate }}"
          />
        </div>
      </div>
    
      <!-- Row 2: Téléphone / Email -->
      <div class="grid grid-cols-2 gap-6 mb-6">
        <div class="col-span-1">
          <label for="numTel" class="block tracking-wide text-gray-700 font-[300] mb-2 text-sm">
            {{ 'user.numTel' | translate }}
          </label>
          <input
            formControlName="numTel"
            id="numTel"
            type="text"
            class="appearance-none block w-full text-gray-700 font-[200] border border-gray-200 rounded focus:outline-none focus:bg-white peer min-h-[auto] focus:border-[1.5px] focus:border-primary px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary bg-slate-100"
            placeholder="{{ 'user.enter_numTel' | translate }}"
          />
        </div>
        <div class="col-span-1">
          <label for="email" class="block tracking-wide text-gray-700 font-[300] mb-2 text-sm">
            {{ 'user.email' | translate }}
          </label>
          <input
            formControlName="email"
            id="email"
            type="email"
            class="appearance-none block w-full text-gray-700 font-[200] border border-gray-200 rounded focus:outline-none focus:bg-white peer min-h-[auto] focus:border-[1.5px] focus:border-primary px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary bg-slate-100"
            placeholder="{{ 'user.enter_email' | translate }}"
          />
        </div>
      </div>
    
      <!-- Row 3: Profession / Rôle -->
      <div class="grid grid-cols-2 gap-6 mb-6">
        <div class="col-span-1">
          <label for="profession" class="block tracking-wide text-gray-700 font-[300] mb-2 text-sm">
            {{ 'user.profession' | translate }}
          </label>
          <select
            formControlName="profession"
            id="profession"
            (change)="onProfessionChange()"
            class="appearance-none block w-full text-gray-700 font-[200] border border-gray-200 rounded focus:outline-none focus:bg-white peer min-h-[auto] focus:border-[1.5px] focus:border-primary px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary bg-slate-100"
          >
            <option value="chercheur">{{ 'user.chercheur' | translate }}</option>
            <option value="medecin">{{ 'user.medecin' | translate }}</option>
            <option value="patient">{{ 'user.patient' | translate }}</option>
          </select>
        </div>
        <div class="col-span-1" *ngIf="showRole">
          <label for="role" class="block tracking-wide text-gray-700 font-[300] mb-2 text-sm">
            {{ 'user.role' | translate }}
          </label>
          <select
            formControlName="role"
            id="role"
            class="appearance-none block w-full text-gray-700 font-[200] border border-gray-200 rounded focus:outline-none focus:bg-white peer min-h-[auto] focus:border-[1.5px] focus:border-primary px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary bg-slate-100"
          >
            <option value="admin">{{ 'user.admin' | translate }}</option>
            <option value="employe">{{ 'user.employe' | translate }}</option>
            <option value="utilisateur">{{ 'user.utilisateur' | translate }}</option>
          </select>
        </div>
      </div>
    
  
    </form>
    

    <!-- Next Button -->
    <div class="flex justify-center items-center ">
      
      <button
        [disabled]="!UserFormStepOne.valid"
        class="bg-primary text-white rounded-full px-8 py-2 text-sm md:text-base disabled:bg-gray-300 disabled:cursor-not-allowed"
        (click)="onNextPage()"
      >
        {{'user.next' | translate}}
      </button>
    </div>
  </div>
</ng-container>

      
      
      <ng-container *ngIf="step == 2 ">
        <!-- form -->
        <div class="animate__animated animate__zoomIn max-md:col-span-5 col-span-4 ">

          <div class="animate__animated animate__zoomIn max-md:col-span-5 col-span-4 h-96">
           
            <input
            type="file"
            accept="image/*"
            class="hidden"
            id="logo"
            #fileInput
            (change)="onFileSelected($event)"
          />
              
         
                  <button
                  type="button"
                  class="text-sm py-2 text-white   bg-gray-400  bg-primary/5 border font-chillax items-center  flex space-x-2 justify-center rounded-md w-full px-16 h-60"
                  (click)="fileInput.click()"
                >
                <p *ngIf="!logoPreview" class="text-gray-500 text-sm ">
                  {{'add-laboratory.upload_image' | translate}} .jpg, .png
                </p>
                <p *ngIf="logoPreview" class="text-gray-500 text-sm ">
                  {{'add-laboratory.update_image' | translate}} .jpg, .png
                </p>
                
  
                <img *ngIf="logoPreview" [src]="logoPreview" alt="Logo Preview" class="h-56 w-56 border-2 object-cover rounded-xl mr-4" />
                 
                </button>
          </div>

          <div class="absolute bottom-4 right-1 grid grid-cols-3 gap-2">
            

            <div class=" space-x-4 flex justify-center  mx-8 w-full" >
              <button
          class="  border-2 border-primary text-primary bg-white rounded-full px-4 py-2 mx-2 text-sm md:text-base disabled:bg-gray-300 disabled:cursor-not-allowed"
          (click)="onBackPage()"
        >
        {{'add-laboratory.previous' | translate}}
        </button>            <button
            [disabled]="!image"
            class=" bg-primary  text-white   rounded-full px-3 py-2 text-s md:text-base disabled:bg-gray-300 disabled:cursor-not-allowed"
            (click)="onNextPage()"
          >
          {{'user.next' | translate}}

          </button>
          </div>
          </div>

        </div>
      </ng-container>

      <ng-container *ngIf="step == 3 ">

        <div class="animate__animated animate__zoomIn max-md:col-span-5 col-span-4 ">

       <app-signing-pad (signatureSaved)="saveSignature($event)"></app-signing-pad>

  <div class="result h-40 ">
    <span>{{'user.signature' | translate}} : </span>
    <img *ngIf="signatureImg" [src]="signatureImg" alt="Signature">
  </div>  

  <div class=" space-x-4 flex justify-center  mx-8 w-full" >
    <button
class="  border-2 border-primary text-primary bg-white rounded-full px-4 py-2 mx-2 text-sm md:text-base disabled:bg-gray-300 disabled:cursor-not-allowed"
(click)="onBackPage()"
>
{{'add-laboratory.previous' | translate}}
</button>            <button
  [disabled]="!image"
  class=" bg-primary  text-white   rounded-full px-3 py-2 text-s md:text-base disabled:bg-gray-300 disabled:cursor-not-allowed"
  (click)="onNextPage()"
>
{{'user.next' | translate}}

</button>
</div>
  </div>


      </ng-container>

    </div>
    
  </div>
